package {	//imports	import flash.events.Event;	import flash.events.MouseEvent;	import flash.events.TimerEvent;	import flash.display.MovieClip;		public class Snake{				private static var instance:Snake;						public static function getInstance():Snake {			if (instance == null) {				instance = new Snake();			}			return instance;		}				public var BodyPartList:Array = [];		public var head:BodyPart;		public var Energy:int = 100;		public var Speed:Number = 1.0;				private var _State:String = "Normal";				public function Snake(){					}						public function set State(s:String){			if (_State == s)				return;			switch (State){				case "Normal":				case "EnemyAbsorbed":				case "Boost":				case "SpecialAbility":				case "EnergyEmpty":				default:				_State = s;			}		}				public function get State():String{			return _State;		}				public function init(){			//Set init position, init length;			var grids:Array = [];			var centerX:int = Math.round(GridSystem.BATTLEFIELD_X/2);			var centerY:int = Math.round(GridSystem.BATTLEFIELD_Y/2);			var g:Grid = GridSystem.GridArray[centerX][centerY];			var g2:Grid = GridSystem.GridArray[centerX][centerY+1];			grids.push(g2);			grids.push(g);			initWithGrids(grids);		}				public function initWithGrids(grids:Array){			BodyPartList = [];			for each (var g in grids){				var bodyPart = new BodyPart(g);				BodyPartList.push(bodyPart);			}			//for the last bodypart, the head			bodyPart.isHead = true;			head = bodyPart;					}				public function moveToNextGrid(nextGrid:Grid, hitEnemy:Boolean){			if (hitEnemy){						head.isHead = false;				var bodyPart = new BodyPart(nextGrid);				bodyPart.isHead = true;				head = bodyPart;				BodyPartList.push(bodyPart);			}else{				for (var i:int = 0; i < BodyPartList.length-1; i++){					BodyPartList[i].grid = BodyPartList[i+1].grid;				}				BodyPartList[BodyPartList.length - 1].grid = nextGrid;			}		}				public function inBodyPartList(g:Grid):Boolean {			for each (var bodyPart in BodyPartList){				if (bodyPart.grid == g)					return true;			}			return false;		}						public static function reset(){			instance = null;		}	}	}